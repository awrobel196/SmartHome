¶
]C:\Users\adam\source\repos\SmartHome\src\Infrastructure\Infrastructure\DependencyInjection.cs
	namespace 	
Infrastructure
 
{ 
public 

static 
class 
DependencyInjection +
{		 
public

 
static

 
IServiceCollection

 (
AddInfrastructure

) :
(

: ;
this

; ?
IServiceCollection

@ R
services

S [
,

[ \
IConfiguration 
configuration (
)( )
{ 	
services 
. 
AddDbContext !
<! " 
ApplicationDbContext" 6
>6 7
(7 8
options8 ?
=>@ B
options 
. 
UseSqlServer $
($ %
configuration% 2
.2 3
GetConnectionString3 F
(F G
$strG ]
)] ^
)^ _
)_ `
;` a
return 
services 
; 
} 	
} 
} ž
jC:\Users\adam\source\repos\SmartHome\src\Infrastructure\Infrastructure\Persistance\ApplicationDbContext.cs
	namespace		 	
Infrastructure		
 
.		 
Persistance		 $
{

 
public 

class  
ApplicationDbContext %
:& '
	DbContext( 1
{ 
public  
ApplicationDbContext #
(# $
DbContextOptions$ 4
<4 5 
ApplicationDbContext5 I
>I J
optionsK R
)R S
:T U
baseV Z
(Z [
options[ b
)b c
{ 	
}
 
public 
DbSet 
< 
AirlyCaqiCodes #
># $
AirlyCaqiCodes% 3
{4 5
get6 9
;9 :
set; >
;> ?
}@ A
public 
DbSet 
< 

AirQuality 
>  

AirQuality! +
{, -
get. 1
;1 2
set3 6
;6 7
}8 9
public 
DbSet 
< 
	IoTDevice 
> 
	IoTDevice  )
{* +
get, /
;/ 0
set1 4
;4 5
}6 7
public 
DbSet 
< 
IoTDeviceValues $
>$ %
IoTDeviceValues& 5
{6 7
get8 ;
;; <
set= @
;@ A
}B C
public 
DbSet 
< 
WeatherForecast $
>$ %
WeatherForecast& 5
{6 7
get8 ;
;; <
set= @
;@ A
}B C
public 
DbSet 
<  
WeatherForecastCodes )
>) * 
WeatherForecastCodes+ ?
{@ A
getB E
;E F
setG J
;J K
}L M
public 
DbSet 
< 
SunsetSunrise "
>" #
SunsetSunrise$ 1
{2 3
get4 7
;7 8
set9 <
;< =
}> ?
} 
} ù˜
C:\Users\adam\source\repos\SmartHome\src\Infrastructure\Infrastructure\Persistance\Migrations\20220124074049_InitieMigration.cs
	namespace 	
Infrastructure
 
. 
Persistance $
.$ %

Migrations% /
{ 
public 

partial 
class 
InitieMigration (
:) *
	Migration+ 4
{		 
	protected

 
override

 
void

 
Up

  "
(

" #
MigrationBuilder

# 3
migrationBuilder

4 D
)

D E
{ 	
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
$str &
,& '
columns 
: 
table 
=> !
new" %
{ 
AirlyCaqiCodesId $
=% &
table' ,
., -
Column- 3
<3 4
int4 7
>7 8
(8 9
type9 =
:= >
$str? D
,D E
nullableF N
:N O
falseP U
)U V
. 

Annotation #
(# $
$str$ 8
,8 9
$str: @
)@ A
,A B
Name 
= 
table  
.  !
Column! '
<' (
string( .
>. /
(/ 0
type0 4
:4 5
$str6 E
,E F
nullableG O
:O P
falseQ V
)V W
,W X
Description 
=  !
table" '
.' (
Column( .
<. /
string/ 5
>5 6
(6 7
type7 ;
:; <
$str= L
,L M
nullableN V
:V W
falseX ]
)] ^
,^ _
Advice 
= 
table "
." #
Column# )
<) *
string* 0
>0 1
(1 2
type2 6
:6 7
$str8 G
,G H
nullableI Q
:Q R
falseS X
)X Y
,Y Z
Icon 
= 
table  
.  !
Column! '
<' (
string( .
>. /
(/ 0
type0 4
:4 5
$str6 E
,E F
nullableG O
:O P
falseQ V
)V W
,W X
Color 
= 
table !
.! "
Column" (
<( )
string) /
>/ 0
(0 1
type1 5
:5 6
$str7 F
,F G
nullableH P
:P Q
falseR W
)W X
} 
, 
constraints 
: 
table "
=># %
{ 
table 
. 

PrimaryKey $
($ %
$str% 8
,8 9
x: ;
=>< >
x? @
.@ A
AirlyCaqiCodesIdA Q
)Q R
;R S
} 
) 
; 
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
$str !
,! "
columns 
: 
table 
=> !
new" %
{   
IoTDeviceId!! 
=!!  !
table!!" '
.!!' (
Column!!( .
<!!. /
int!!/ 2
>!!2 3
(!!3 4
type!!4 8
:!!8 9
$str!!: ?
,!!? @
nullable!!A I
:!!I J
false!!K P
)!!P Q
."" 

Annotation"" #
(""# $
$str""$ 8
,""8 9
$str"": @
)""@ A
,""A B
Name## 
=## 
table##  
.##  !
Column##! '
<##' (
string##( .
>##. /
(##/ 0
type##0 4
:##4 5
$str##6 E
,##E F
nullable##G O
:##O P
false##Q V
)##V W
}$$ 
,$$ 
constraints%% 
:%% 
table%% "
=>%%# %
{&& 
table'' 
.'' 

PrimaryKey'' $
(''$ %
$str''% 3
,''3 4
x''5 6
=>''7 9
x'': ;
.''; <
IoTDeviceId''< G
)''G H
;''H I
}(( 
)(( 
;(( 
migrationBuilder** 
.** 
CreateTable** (
(**( )
name++ 
:++ 
$str++ ,
,++, -
columns,, 
:,, 
table,, 
=>,, !
new,," %
{-- "
WeatherForecastCodesId.. *
=..+ ,
table..- 2
...2 3
Column..3 9
<..9 :
int..: =
>..= >
(..> ?
type..? C
:..C D
$str..E J
,..J K
nullable..L T
:..T U
false..V [
)..[ \
,..\ ]
Main// 
=// 
table//  
.//  !
Column//! '
<//' (
string//( .
>//. /
(/// 0
type//0 4
://4 5
$str//6 E
,//E F
nullable//G O
://O P
false//Q V
)//V W
,//W X
Description00 
=00  !
table00" '
.00' (
Column00( .
<00. /
string00/ 5
>005 6
(006 7
type007 ;
:00; <
$str00= L
,00L M
nullable00N V
:00V W
false00X ]
)00] ^
,00^ _
Icon11 
=11 
table11  
.11  !
Column11! '
<11' (
string11( .
>11. /
(11/ 0
type110 4
:114 5
$str116 E
,11E F
nullable11G O
:11O P
false11Q V
)11V W
}22 
,22 
constraints33 
:33 
table33 "
=>33# %
{44 
table55 
.55 

PrimaryKey55 $
(55$ %
$str55% >
,55> ?
x55@ A
=>55B D
x55E F
.55F G"
WeatherForecastCodesId55G ]
)55] ^
;55^ _
}66 
)66 
;66 
migrationBuilder88 
.88 
CreateTable88 (
(88( )
name99 
:99 
$str99 "
,99" #
columns:: 
::: 
table:: 
=>:: !
new::" %
{;; 
AirQualityId<<  
=<<! "
table<<# (
.<<( )
Column<<) /
<<</ 0
int<<0 3
><<3 4
(<<4 5
type<<5 9
:<<9 :
$str<<; @
,<<@ A
nullable<<B J
:<<J K
false<<L Q
)<<Q R
.== 

Annotation== #
(==# $
$str==$ 8
,==8 9
$str==: @
)==@ A
,==A B
AirlyCaqiCodesId>> $
=>>% &
table>>' ,
.>>, -
Column>>- 3
<>>3 4
int>>4 7
>>>7 8
(>>8 9
type>>9 =
:>>= >
$str>>? D
,>>D E
nullable>>F N
:>>N O
false>>P U
)>>U V
,>>V W
PM1?? 
=?? 
table?? 
.??  
Column??  &
<??& '
double??' -
>??- .
(??. /
type??/ 3
:??3 4
$str??5 <
,??< =
nullable??> F
:??F G
false??H M
)??M N
,??N O
PM25@@ 
=@@ 
table@@  
.@@  !
Column@@! '
<@@' (
double@@( .
>@@. /
(@@/ 0
type@@0 4
:@@4 5
$str@@6 =
,@@= >
nullable@@? G
:@@G H
false@@I N
)@@N O
,@@O P
PM10AA 
=AA 
tableAA  
.AA  !
ColumnAA! '
<AA' (
doubleAA( .
>AA. /
(AA/ 0
typeAA0 4
:AA4 5
$strAA6 =
,AA= >
nullableAA? G
:AAG H
falseAAI N
)AAN O
,AAO P
PressureBB 
=BB 
tableBB $
.BB$ %
ColumnBB% +
<BB+ ,
doubleBB, 2
>BB2 3
(BB3 4
typeBB4 8
:BB8 9
$strBB: A
,BBA B
nullableBBC K
:BBK L
falseBBM R
)BBR S
,BBS T
HumidityCC 
=CC 
tableCC $
.CC$ %
ColumnCC% +
<CC+ ,
doubleCC, 2
>CC2 3
(CC3 4
typeCC4 8
:CC8 9
$strCC: A
,CCA B
nullableCCC K
:CCK L
falseCCM R
)CCR S
,CCS T
TemperatureDD 
=DD  !
tableDD" '
.DD' (
ColumnDD( .
<DD. /
doubleDD/ 5
>DD5 6
(DD6 7
typeDD7 ;
:DD; <
$strDD= D
,DDD E
nullableDDF N
:DDN O
falseDDP U
)DDU V
,DDV W
AirlyCaqiValueEE "
=EE# $
tableEE% *
.EE* +
ColumnEE+ 1
<EE1 2
doubleEE2 8
>EE8 9
(EE9 :
typeEE: >
:EE> ?
$strEE@ G
,EEG H
nullableEEI Q
:EEQ R
falseEES X
)EEX Y
,EEY Z
TestDateTimeFF  
=FF! "
tableFF# (
.FF( )
ColumnFF) /
<FF/ 0
DateTimeFF0 8
>FF8 9
(FF9 :
typeFF: >
:FF> ?
$strFF@ K
,FFK L
nullableFFM U
:FFU V
falseFFW \
)FF\ ]
}GG 
,GG 
constraintsHH 
:HH 
tableHH "
=>HH# %
{II 
tableJJ 
.JJ 

PrimaryKeyJJ $
(JJ$ %
$strJJ% 4
,JJ4 5
xJJ6 7
=>JJ8 :
xJJ; <
.JJ< =
AirQualityIdJJ= I
)JJI J
;JJJ K
tableKK 
.KK 

ForeignKeyKK $
(KK$ %
nameLL 
:LL 
$strLL M
,LLM N
columnMM 
:MM 
xMM  !
=>MM" $
xMM% &
.MM& '
AirlyCaqiCodesIdMM' 7
,MM7 8
principalTableNN &
:NN& '
$strNN( 8
,NN8 9
principalColumnOO '
:OO' (
$strOO) ;
,OO; <
onDeletePP  
:PP  !
ReferentialActionPP" 3
.PP3 4
CascadePP4 ;
)PP; <
;PP< =
}QQ 
)QQ 
;QQ 
migrationBuilderSS 
.SS 
CreateTableSS (
(SS( )
nameTT 
:TT 
$strTT '
,TT' (
columnsUU 
:UU 
tableUU 
=>UU !
newUU" %
{VV 
IoTDeviceValuesIdWW %
=WW& '
tableWW( -
.WW- .
ColumnWW. 4
<WW4 5
intWW5 8
>WW8 9
(WW9 :
typeWW: >
:WW> ?
$strWW@ E
,WWE F
nullableWWG O
:WWO P
falseWWQ V
)WWV W
.XX 

AnnotationXX #
(XX# $
$strXX$ 8
,XX8 9
$strXX: @
)XX@ A
,XXA B
IoTDeviceIdYY 
=YY  !
tableYY" '
.YY' (
ColumnYY( .
<YY. /
intYY/ 2
>YY2 3
(YY3 4
typeYY4 8
:YY8 9
$strYY: ?
,YY? @
nullableYYA I
:YYI J
falseYYK P
)YYP Q
,YYQ R
TemperatureZZ 
=ZZ  !
tableZZ" '
.ZZ' (
ColumnZZ( .
<ZZ. /
doubleZZ/ 5
>ZZ5 6
(ZZ6 7
typeZZ7 ;
:ZZ; <
$strZZ= D
,ZZD E
nullableZZF N
:ZZN O
falseZZP U
)ZZU V
,ZZV W
Pressure[[ 
=[[ 
table[[ $
.[[$ %
Column[[% +
<[[+ ,
double[[, 2
>[[2 3
([[3 4
type[[4 8
:[[8 9
$str[[: A
,[[A B
nullable[[C K
:[[K L
false[[M R
)[[R S
,[[S T
Humidity\\ 
=\\ 
table\\ $
.\\$ %
Column\\% +
<\\+ ,
double\\, 2
>\\2 3
(\\3 4
type\\4 8
:\\8 9
$str\\: A
,\\A B
nullable\\C K
:\\K L
false\\M R
)\\R S
,\\S T
TestDateTime]]  
=]]! "
table]]# (
.]]( )
Column]]) /
<]]/ 0
DateTime]]0 8
>]]8 9
(]]9 :
type]]: >
:]]> ?
$str]]@ K
,]]K L
nullable]]M U
:]]U V
false]]W \
)]]\ ]
}^^ 
,^^ 
constraints__ 
:__ 
table__ "
=>__# %
{`` 
tableaa 
.aa 

PrimaryKeyaa $
(aa$ %
$straa% 9
,aa9 :
xaa; <
=>aa= ?
xaa@ A
.aaA B
IoTDeviceValuesIdaaB S
)aaS T
;aaT U
tablebb 
.bb 

ForeignKeybb $
(bb$ %
namecc 
:cc 
$strcc H
,ccH I
columndd 
:dd 
xdd  !
=>dd" $
xdd% &
.dd& '
IoTDeviceIddd' 2
,dd2 3
principalTableee &
:ee& '
$stree( 3
,ee3 4
principalColumnff '
:ff' (
$strff) 6
,ff6 7
onDeletegg  
:gg  !
ReferentialActiongg" 3
.gg3 4
Cascadegg4 ;
)gg; <
;gg< =
}hh 
)hh 
;hh 
migrationBuilderjj 
.jj 
CreateTablejj (
(jj( )
namekk 
:kk 
$strkk '
,kk' (
columnsll 
:ll 
tablell 
=>ll !
newll" %
{mm 
WeatherForecastIdnn %
=nn& '
tablenn( -
.nn- .
Columnnn. 4
<nn4 5
intnn5 8
>nn8 9
(nn9 :
typenn: >
:nn> ?
$strnn@ E
,nnE F
nullablennG O
:nnO P
falsennQ V
)nnV W
.oo 

Annotationoo #
(oo# $
$stroo$ 8
,oo8 9
$stroo: @
)oo@ A
,ooA B"
WeatherForecastCodesIdpp *
=pp+ ,
tablepp- 2
.pp2 3
Columnpp3 9
<pp9 :
intpp: =
>pp= >
(pp> ?
typepp? C
:ppC D
$strppE J
,ppJ K
nullableppL T
:ppT U
falseppV [
)pp[ \
,pp\ ]
Temperatureqq 
=qq  !
tableqq" '
.qq' (
Columnqq( .
<qq. /
doubleqq/ 5
>qq5 6
(qq6 7
typeqq7 ;
:qq; <
$strqq= D
,qqD E
nullableqqF N
:qqN O
falseqqP U
)qqU V
,qqV W
FeelsTemperaturerr $
=rr% &
tablerr' ,
.rr, -
Columnrr- 3
<rr3 4
doublerr4 :
>rr: ;
(rr; <
typerr< @
:rr@ A
$strrrB I
,rrI J
nullablerrK S
:rrS T
falserrU Z
)rrZ [
,rr[ \
	WindSpeedss 
=ss 
tabless  %
.ss% &
Columnss& ,
<ss, -
doubless- 3
>ss3 4
(ss4 5
typess5 9
:ss9 :
$strss; B
,ssB C
nullablessD L
:ssL M
falsessN S
)ssS T
,ssT U
TestDateTimett  
=tt! "
tablett# (
.tt( )
Columntt) /
<tt/ 0
DateTimett0 8
>tt8 9
(tt9 :
typett: >
:tt> ?
$strtt@ K
,ttK L
nullablettM U
:ttU V
falsettW \
)tt\ ]
}uu 
,uu 
constraintsvv 
:vv 
tablevv "
=>vv# %
{ww 
tablexx 
.xx 

PrimaryKeyxx $
(xx$ %
$strxx% 9
,xx9 :
xxx; <
=>xx= ?
xxx@ A
.xxA B
WeatherForecastIdxxB S
)xxS T
;xxT U
tableyy 
.yy 

ForeignKeyyy $
(yy$ %
namezz 
:zz 
$strzz ^
,zz^ _
column{{ 
:{{ 
x{{  !
=>{{" $
x{{% &
.{{& '"
WeatherForecastCodesId{{' =
,{{= >
principalTable|| &
:||& '
$str||( >
,||> ?
principalColumn}} '
:}}' (
$str}}) A
,}}A B
onDelete~~  
:~~  !
ReferentialAction~~" 3
.~~3 4
Cascade~~4 ;
)~~; <
;~~< =
} 
) 
; 
migrationBuilder
 
.
 
CreateIndex
 (
(
( )
name
‚‚ 
:
‚‚ 
$str
‚‚ 6
,
‚‚6 7
table
ƒƒ 
:
ƒƒ 
$str
ƒƒ #
,
ƒƒ# $
column
„„ 
:
„„ 
$str
„„ *
)
„„* +
;
„„+ ,
migrationBuilder
†† 
.
†† 
CreateIndex
†† (
(
††( )
name
‡‡ 
:
‡‡ 
$str
‡‡ 6
,
‡‡6 7
table
ˆˆ 
:
ˆˆ 
$str
ˆˆ (
,
ˆˆ( )
column
‰‰ 
:
‰‰ 
$str
‰‰ %
)
‰‰% &
;
‰‰& '
migrationBuilder
‹‹ 
.
‹‹ 
CreateIndex
‹‹ (
(
‹‹( )
name
ŒŒ 
:
ŒŒ 
$str
ŒŒ A
,
ŒŒA B
table
 
:
 
$str
 (
,
( )
column
ŽŽ 
:
ŽŽ 
$str
ŽŽ 0
)
ŽŽ0 1
;
ŽŽ1 2
}
 	
	protected
‘‘ 
override
‘‘ 
void
‘‘ 
Down
‘‘  $
(
‘‘$ %
MigrationBuilder
‘‘% 5
migrationBuilder
‘‘6 F
)
‘‘F G
{
’’ 	
migrationBuilder
““ 
.
““ 
	DropTable
““ &
(
““& '
name
”” 
:
”” 
$str
”” "
)
””" #
;
””# $
migrationBuilder
–– 
.
–– 
	DropTable
–– &
(
––& '
name
—— 
:
—— 
$str
—— '
)
——' (
;
——( )
migrationBuilder
™™ 
.
™™ 
	DropTable
™™ &
(
™™& '
name
šš 
:
šš 
$str
šš '
)
šš' (
;
šš( )
migrationBuilder
œœ 
.
œœ 
	DropTable
œœ &
(
œœ& '
name
 
:
 
$str
 &
)
& '
;
' (
migrationBuilder
ŸŸ 
.
ŸŸ 
	DropTable
ŸŸ &
(
ŸŸ& '
name
   
:
   
$str
   !
)
  ! "
;
  " #
migrationBuilder
¢¢ 
.
¢¢ 
	DropTable
¢¢ &
(
¢¢& '
name
££ 
:
££ 
$str
££ ,
)
££, -
;
££- .
}
¤¤ 	
}
¥¥ 
}¦¦ Ö
rC:\Users\adam\source\repos\SmartHome\src\Infrastructure\Infrastructure\Persistance\Migrations\20220124101245_m1.cs
	namespace 	
Infrastructure
 
. 
Persistance $
.$ %

Migrations% /
{ 
public 

partial 
class 
m1 
: 
	Migration '
{ 
	protected		 
override		 
void		 
Up		  "
(		" #
MigrationBuilder		# 3
migrationBuilder		4 D
)		D E
{

 	
migrationBuilder 
. 
	AddColumn &
<& '
double' -
>- .
(. /
name 
: 
$str  
,  !
table 
: 
$str (
,( )
type 
: 
$str 
, 
nullable 
: 
false 
,  
defaultValue 
: 
$num !
)! "
;" #
migrationBuilder 
. 
	AddColumn &
<& '
double' -
>- .
(. /
name 
: 
$str  
,  !
table 
: 
$str (
,( )
type 
: 
$str 
, 
nullable 
: 
false 
,  
defaultValue 
: 
$num !
)! "
;" #
} 	
	protected 
override 
void 
Down  $
($ %
MigrationBuilder% 5
migrationBuilder6 F
)F G
{ 	
migrationBuilder 
. 

DropColumn '
(' (
name 
: 
$str  
,  !
table 
: 
$str (
)( )
;) *
migrationBuilder   
.   

DropColumn   '
(  ' (
name!! 
:!! 
$str!!  
,!!  !
table"" 
:"" 
$str"" (
)""( )
;"") *
}## 	
}$$ 
}%% ®
rC:\Users\adam\source\repos\SmartHome\src\Infrastructure\Infrastructure\Persistance\Migrations\20220128112838_m2.cs
	namespace 	
Infrastructure
 
. 
Persistance $
.$ %

Migrations% /
{ 
public 

partial 
class 
m2 
: 
	Migration '
{ 
	protected		 
override		 
void		 
Up		  "
(		" #
MigrationBuilder		# 3
migrationBuilder		4 D
)		D E
{

 	
} 	
	protected 
override 
void 
Down  $
($ %
MigrationBuilder% 5
migrationBuilder6 F
)F G
{ 	
} 	
} 
} á
rC:\Users\adam\source\repos\SmartHome\src\Infrastructure\Infrastructure\Persistance\Migrations\20220128113121_m3.cs
	namespace 	
Infrastructure
 
. 
Persistance $
.$ %

Migrations% /
{ 
public 

partial 
class 
m3 
: 
	Migration '
{		 
	protected

 
override

 
void

 
Up

  "
(

" #
MigrationBuilder

# 3
migrationBuilder

4 D
)

D E
{ 	
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
$str %
,% &
columns 
: 
table 
=> !
new" %
{ 
IdSunsetSunrise #
=$ %
table& +
.+ ,
Column, 2
<2 3
int3 6
>6 7
(7 8
type8 <
:< =
$str> C
,C D
nullableE M
:M N
falseO T
)T U
. 

Annotation #
(# $
$str$ 8
,8 9
$str: @
)@ A
,A B
Sunrise 
= 
table #
.# $
Column$ *
<* +
DateTime+ 3
>3 4
(4 5
type5 9
:9 :
$str; F
,F G
nullableH P
:P Q
falseR W
)W X
,X Y
Sunset 
= 
table "
." #
Column# )
<) *
DateTime* 2
>2 3
(3 4
type4 8
:8 9
$str: E
,E F
nullableG O
:O P
falseQ V
)V W
} 
, 
constraints 
: 
table "
=># %
{ 
table 
. 

PrimaryKey $
($ %
$str% 7
,7 8
x9 :
=>; =
x> ?
.? @
IdSunsetSunrise@ O
)O P
;P Q
} 
) 
; 
} 	
	protected 
override 
void 
Down  $
($ %
MigrationBuilder% 5
migrationBuilder6 F
)F G
{ 	
migrationBuilder 
. 
	DropTable &
(& '
name 
: 
$str %
)% &
;& '
} 	
}   
}!! 